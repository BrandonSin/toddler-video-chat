(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(e,t){},141:function(e,t){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(11),i=n.n(c),l=n(9),s=n(195),o=n(197),r=n(202),d=n(91),j=n(61),u=n.n(j),b=n(3),m=Object(a.createContext)(),O=d.io.connect("https://toddler-video-chat.herokuapp.com/"),f=function(e){var t=e.children,n=Object(a.useState)(""),c=Object(l.a)(n,2),i=(c[0],c[1]),s=Object(a.useState)(),o=Object(l.a)(s,2),r=o[0],d=o[1],j=Object(a.useState)(""),f=Object(l.a)(j,2),v=(f[0],f[1]),h=Object(a.useState)(!1),x=Object(l.a)(h,2),g=x[0],p=x[1],C=Object(a.useState)(!1),S=Object(l.a)(C,2),y=S[0],A=S[1],k=Object(a.useState)(null),w=Object(l.a)(k,2),N=w[0],E=w[1],I=Object(a.useState)(""),U=Object(l.a)(I,2),W=U[0],P=U[1],V=Object(a.useState)({}),B=Object(l.a)(V,2),T=B[0],D=B[1],R=Object(a.useState)(""),z=Object(l.a)(R,2),M=z[0],J=z[1],L=Object(a.useRef)(),F=Object(a.useRef)(),G=Object(a.useRef)(),Q=Object(a.useState)(),q=Object(l.a)(Q,2),H=q[0],K=q[1],X=Object(a.useState)(),Y=Object(l.a)(X,2),Z=Y[0],$=Y[1];switch(H){case 1:console.log("Sending Lion to Server: "+H),O.emit("animalCreated",{animal:H,anim:1});break;case 2:console.log("Sending Pig to Server: "+H),O.emit("animalCreated",{animal:H,anim:2});break;case 4:console.log("Sending Cow to Server: "+H),O.emit("animalCreated",{animal:H,anim:4});break;case 5:console.log("Sending Monkey to Server: "+H),O.emit("animalCreated",{animal:H,anim:5})}O.once("createAnimal",(function(e){var t=e.animal,n=e.anim;$(t),d(n),console.log("Client Acknowledges Animal Sound: "+t)})),Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){E(e),L.current.srcObject=e})),O.on("me",(function(e){return J(e)})),O.on("callUser",(function(e){var t=e.from,n=e.name,a=e.signal;D({isReceivingCall:!0,from:t,name:n,signal:a})}))}),[]);return Object(b.jsx)(m.Provider,{value:{call:T,callAccepted:g,myVideo:L,userVideo:F,stream:N,name:W,setName:P,callEnded:y,me:M,callUser:function(e){var t=new u.a({initiator:!0,trickle:!1,stream:N});t.on("signal",(function(t){O.emit("callUser",{userToCall:e,signalData:t,from:M,name:W})})),t.on("stream",(function(e){F.current.srcObject=e})),O.on("callAccepted",(function(e){p(!0),t.signal(e)})),t.on("callEnded",(function(){A(!0)})),G.current=t},leaveCall:function(){A(!0),O.emit("hangUp"),G.current.destroy(),window.location.reload()},answerCall:function(){p(!0);var e=new u.a({initiator:!1,trickle:!1,stream:N});e.on("signal",(function(e){O.emit("answerCall",{signal:e,to:T.from})})),e.on("stream",(function(e){F.current.srcObject=e})),e.signal(T.signal),e.on("callEnded",(function(){A(!0)})),G.current=e},setAnimalButton:v,setAnimalType:i,setAnimalSound:K,userAnimalSound:Z,animalAnimation:r,setAnimalAnimation:d},children:t})},v=n(45),h=n.p+"static/media/snort.b3cfce48.mp3",x=n.p+"static/media/leopard3.ad04c3f7.mp3",g=n.p+"static/media/cow.01dd1557.mp3",p=n.p+"static/media/SQMonkey.52d8ec9a.mp3",C=(n(90),function(){var e=Object(a.useContext)(m),t=(e.name,e.callAccepted,e.myVideo),n=e.userVideo,c=e.stream,i=(e.callEnded,e.call,e.setAnimalSound),s=e.userAnimalSound,o=e.animalAnimation,r=(e.setAnimalAnimation,Object(v.a)(h,{volume:.05})),d=Object(l.a)(r,1)[0];var j=Object(v.a)(x,{volume:.1}),u=Object(l.a)(j,1)[0];var O=Object(v.a)(g,{volume:.5}),f=Object(l.a)(O,1)[0];var C=Object(v.a)(p,{volume:.2}),S=Object(l.a)(C,1)[0];Object(a.useEffect)((function(){switch(s){case 1:console.log("Lion Sound from User: "+s),u(),B(1);break;case 2:console.log("Pig Sound from User: "+s),d(),z(1);break;case 4:console.log("Cow Sound from User: "+s),f(),U(1);break;case 5:console.log("Monkey Sound from User: "+s),S(),w(1)}}),[s,o]);var y=Object(a.useState)(0),A=Object(l.a)(y,2),k=A[0],w=A[1],N=Object(a.useState)(0),E=Object(l.a)(N,2),I=E[0],U=E[1],W=Object(a.useState)(0),P=Object(l.a)(W,2),V=P[0],B=P[1],T=Object(a.useState)(0),D=Object(l.a)(T,2),R=D[0],z=D[1];return Object(b.jsxs)("div",{class:"grid",children:[c&&Object(b.jsx)("div",{class:"hostpic",children:Object(b.jsx)("video",{className:"hosting",playsInline:!0,muted:!0,ref:t,autoPlay:!0})}),Object(b.jsx)("div",{class:"userpic",children:Object(b.jsx)("video",{className:"hosting2",playsInline:!0,ref:n,autoPlay:!0})}),Object(b.jsx)("div",{className:"p2Video",children:Object(b.jsxs)("div",{class:"animalContainer",children:[Object(b.jsx)("div",{id:"1",class:"cell cell-1",children:Object(b.jsx)("button",{class:"lion",onClick:function(){u(),i(1),B(1)},onAnimationEnd:function(){return B(0)},lionAnim:V})}),Object(b.jsx)("div",{id:"2",class:"cell cell-2",children:Object(b.jsx)("button",{class:"pig",onClick:function(){d(),console.log(I),i(2),z(1)},onAnimationEnd:function(){return z(0)},pigAnim:R})}),Object(b.jsx)("div",{id:"3",class:"cell cell-3"}),Object(b.jsx)("div",{id:"4",class:"cell cell-4",children:Object(b.jsx)("button",{class:"cow",onClick:function(){f(),i(4),U(1)},onAnimationEnd:function(){return U(0)},cowAnim:I})}),Object(b.jsx)("div",{id:"5",class:"cell cell-5",children:Object(b.jsx)("button",{class:"monkey",onClick:function(){S(),i(5),w(1)},onAnimationEnd:function(){return w(0)},monkeyAnim:k})}),Object(b.jsx)("div",{id:"6",class:"cell cell-6"})]})})]})}),S=n(191),y=n(196),A=n(201),k=n(92),w=n(198),N=n(199),E=n(200),I=function(e){var t=e.children,n=Object(a.useContext)(m),c=n.me,i=n.callAccepted,d=(n.name,n.setName,n.callEnded),j=n.leaveCall,u=n.callUser,O=(n.setAnimalButton,n.setAnimalType,Object(a.useState)("")),f=Object(l.a)(O,2),v=f[0],h=f[1];return Object(b.jsx)(S.a,{className:"container",children:Object(b.jsxs)(s.a,{elevation:10,className:"paper2",children:[Object(b.jsxs)("form",{className:"root",noValidate:!0,autoComplete:"off",children:[Object(b.jsx)(y.a,{container:!0,className:"gridContainer",children:Object(b.jsxs)(y.a,{item:!0,xs:12,md:6,className:"padding",children:[Object(b.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Copy ID to Call User"}),Object(b.jsx)(k.CopyToClipboard,{text:c,className:"margin",children:Object(b.jsx)(r.a,{variant:"contained",color:"secondary",fullWidth:!0,startIcon:Object(b.jsx)(w.a,{fontSize:"large"}),children:"Copy ID"})})]})}),Object(b.jsx)(y.a,{container:!0,className:"gridContainer",children:Object(b.jsxs)(y.a,{item:!0,xs:12,md:6,className:"padding",children:[Object(b.jsx)(A.a,{label:"Paste Call ID",value:v,onChange:function(e){return h(e.target.value)},fullWidth:!0}),i&&!d?Object(b.jsx)(r.a,{variant:"contained",color:"secondary",startIcon:Object(b.jsx)(N.a,{fontSize:"large"}),fullWidth:!0,onClick:j,className:"margin",children:"GoodBye"}):Object(b.jsx)(r.a,{variant:"contained",color:"primary",startIcon:Object(b.jsx)(E.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return u(v)},className:"margin",children:"Call"})]})})]}),t]})})},U=function(){var e=Object(a.useContext)(m),t=e.answerCall,n=e.call,c=e.callAccepted;return Object(b.jsx)("div",{children:n.isReceivingCall&&!c&&Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(b.jsx)("h1",{children:"Who Could It Be? "}),Object(b.jsx)(r.a,{variant:"contained",color:"primary",onClick:t,children:"Pick Up"})]})})},W=n(98),P=n.n(W);var V=function(){var e=Object(a.useState)("block"),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)("none"),d=Object(l.a)(i,2),j=d[0],u=d[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"intro",style:{display:n},children:Object(b.jsxs)(s.a,{elevation:10,className:"paper2",children:[Object(b.jsx)(o.a,{variant:"h4",align:"left",children:"Welcome to"}),Object(b.jsx)(o.a,{variant:"h2",align:"center",color:"Primary",children:"Chat4Toddler"}),Object(b.jsx)("h3",{style:{padding:"1em"},children:"An Interactive Video Chat for Toddlers"}),Object(b.jsx)(r.a,{variant:"contained",color:"primary",startIcon:Object(b.jsx)(P.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return u("grid"),void c("none")}})]})}),Object(b.jsxs)("div",{class:"wrapper",style:{display:j},children:[Object(b.jsx)("div",{class:"vidWrap",children:Object(b.jsx)(C,{})}),Object(b.jsx)("div",{class:"optionWrap",children:Object(b.jsx)(I,{children:Object(b.jsx)(U,{})})})]})]})};i.a.render(Object(b.jsx)(f,{children:Object(b.jsx)(V,{})}),document.getElementById("root"))},90:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.176e277d.chunk.js.map